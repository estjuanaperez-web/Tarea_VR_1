<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snowman in A-Frame</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.7.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>
</head>
<body>
  <a-scene vr-mode-ui="enabled: true">
    
    <!-- Camera -->
    <a-entity position="0 1.6 5">
      <a-camera wasd-controls look-controls></a-camera>
    </a-entity>

    <!-- Floor and Sky -->
    <a-plane position="0 0 -5" rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>
    <a-sky color="#ECECEC"></a-sky>

    <!-- Snowman Entity -->
    <a-entity id="snowman-entity" position="0 0 0" snowman></a-entity>

    <script>
      AFRAME.registerComponent('snowman', {
        init: function () {
          const sceneEl = this.el.object3D;

          const snowman = new THREE.Group();
          sceneEl.add(snowman);

          const whiteMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
          const blackMat = new THREE.MeshStandardMaterial({ color: 0x000000 });
          const orangeMat = new THREE.MeshStandardMaterial({ color: 0xff6600 });
          const brownMat = new THREE.MeshStandardMaterial({ color: 0x8B4513 });
          const hatMat = new THREE.MeshStandardMaterial({ color: 0x8B0000 });

          // Cuerpo
          const bottom = new THREE.Mesh(new THREE.SphereGeometry(1.5, 32, 32), whiteMat);
          bottom.position.set(0, -1.5, 0);
          snowman.add(bottom);

          const middle = new THREE.Mesh(new THREE.SphereGeometry(1.2, 32, 32), whiteMat);
          middle.position.set(0, 0.5, 0);
          snowman.add(middle);

          const head = new THREE.Mesh(new THREE.SphereGeometry(0.9, 32, 32), whiteMat);
          head.position.set(0, 2.2, 0);
          snowman.add(head);

          // Ojos
          const eyeGeo = new THREE.SphereGeometry(0.1, 16, 16);
          const leftEye = new THREE.Mesh(eyeGeo, blackMat);
          leftEye.position.set(-0.25, 2.3, 0.85);
          snowman.add(leftEye);

          const rightEye = new THREE.Mesh(eyeGeo, blackMat);
          rightEye.position.set(0.25, 2.3, 0.85);
          snowman.add(rightEye);

          // Nariz
          const nose = new THREE.Mesh(new THREE.ConeGeometry(0.1, 0.6, 16), orangeMat);
          nose.position.set(0, 2.15, 0.95);
          nose.rotation.x = Math.PI / 2;
          snowman.add(nose);

          // Botones
          const buttonGeo = new THREE.SphereGeometry(0.12, 16, 16);
          const button1 = new THREE.Mesh(buttonGeo, blackMat);
          button1.position.set(0, 1.2, 1.05);
          snowman.add(button1);

          const button2 = new THREE.Mesh(buttonGeo, blackMat);
          button2.position.set(0, 0.7, 1.15);
          snowman.add(button2);

          const button3 = new THREE.Mesh(buttonGeo, blackMat);
          button3.position.set(0, 0.2, 1.05);
          snowman.add(button3);

          // Brazos
          const armGeo = new THREE.CylinderGeometry(0.05, 0.05, 2, 12);
          const leftArm = new THREE.Mesh(armGeo, brownMat);
          leftArm.position.set(-1.6, 0.8, 0);
          leftArm.rotation.z = Math.PI / 4;
          snowman.add(leftArm);

          const rightArm = new THREE.Mesh(armGeo, brownMat);
          rightArm.position.set(1.6, 0.8, 0);
          rightArm.rotation.z = -Math.PI / 4;
          snowman.add(rightArm);

          // Sombrero
          const brim = new THREE.Mesh(new THREE.CylinderGeometry(1.2, 1.2, 0.1, 32), hatMat);
          brim.position.set(0, 2.9, 0);
          snowman.add(brim);

          const topHat = new THREE.Mesh(new THREE.CylinderGeometry(0.7, 0.7, 1, 32), hatMat);
          topHat.position.set(0, 3.4, 0);
          snowman.add(topHat);

          // Luz ambiental
          const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
          sceneEl.add(ambientLight);

          const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
          directionalLight.position.set(5, 10, 7.5);
          sceneEl.add(directionalLight);
        }
      });
    </script>

  </a-scene>
</body>
</html>
